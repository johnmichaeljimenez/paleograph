<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Paleograph</title>

	<script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
	<link href="styles.css" rel="stylesheet">
	<script type="module" src="/script.js"></script>
</head>

<body x-data="app">
	<button @click="fileNew()">New</button>
	<button @click="fileOpen()">Open</button>
	<button @click="fileSave()">Save</button>

	<br><br>
	<form @submit.prevent="run">

		<label>Target Directory:</label><br>
		<input type="text" x-model="form.sourcePath" required><br>

		<label>Custom Prompt</label><br>
		<textarea x-model="form.customPrompt"></textarea><br><br>

		<label>Whitelist Extensions (pipe separated):</label><br>
		<input type="text" x-model="whitelistString"><br>

		<label>Blacklist Folders (pipe separated):</label><br>
		<input type="text" x-model="blacklistString"><br><br>

		<input type="checkbox" x-model="form.dryRun"><br><br>

		<button type="submit">Run</button>
	</form>

	<div x-show="newData?.output?.textBlob?.length > 0">
		<div x-html="renderedReport"></div>

		<button @click="copyBlob()">Copy</button>
		<div x-text="newData.output.textBlob" style="white-space: pre-line;">

		</div>
	</div>
</body>

</html>